-- REPLICATOR + FLING HUB v6.0 | Press T to open/close (100% FIXED)
-- UI always centered • Beautiful animation • Fling works instantly

local Players           = game:GetService("Players")
local TweenService      = game:GetService("TweenService")
local UserInputService  = game:GetService("UserInputService")
local RunService        = game:GetService("RunService")
local player            = Players.LocalPlayer

local screen = Instance.new("ScreenGui")
screen.Name = "ReplicatorFlingHub"
screen.ResetOnSpawn = false
screen.IgnoreGuiInset = true
screen.Parent = game.CoreGui

-- Main Frame (centered)
local main = Instance.new("Frame")
main.Size = UDim2.new(0, 340, 0, 460)
main.Position = UDim2.new(0.5, -170, 0.5, -230)
main.BackgroundColor3 = Color3.fromRGB(12, 12, 28)
main.BorderSizePixel = 0
main.Visible = false
main.Active = true
main.Draggable = true
main.Parent = screen

Instance.new("UICorner", main).CornerRadius = UDim.new(0, 24)
local stroke = Instance.new("UIStroke", main)
stroke.Thickness = 3
stroke.Color = Color3.fromRGB(0, 255, 255)
stroke.Transparency = 0.3

-- Glow effect
local glow = Instance.new("ImageLabel", main)
glow.Size = UDim2.new(1.4,0,1.4,0)
glow.Position = UDim2.new(0.5,0,0.5,0)
glow.AnchorPoint = Vector2.new(0.5,0.5)
glow.BackgroundTransparency = 1
glow.Image = "rbxassetid://4316371720"
glow.ImageColor3 = Color3.fromRGB(0,255,220)
glow.ImageTransparency = 0.55

-- Title
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,0,0,60)
title.BackgroundTransparency = 1
title.Text = "REPLICATOR + FLING"
title.TextColor3 = Color3.fromRGB(0,255,255)
title.Font = Enum.Font.GothamBlack
title.TextSize = 32

-- Content frame
local content = Instance.new("Frame", main)
content.Size = UDim2.new(1,-30,1,-90)
content.Position = UDim2.new(0,15,0,75)
content.BackgroundTransparency = 1

-- Helper to create buttons
local function newBtn(name, posY, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-20,0,55)
    btn.Position = UDim2.new(0,10,0,posY)
    btn.BackgroundColor3 = Color3.fromRGB(30,30,70)
    btn.Text = name
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = content
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,16)
    btn.MouseButton1Click:Connect(callback)
    return btn
end

-- Replicator Toggle
local repBtn = newBtn("REPLICATOR OFF", 10, function()
    local on = repBtn.Text == "REPLICATOR OFF"
    repBtn.Text = on and "REPLICATOR ON" or "REPLICATOR OFF"
    repBtn.BackgroundColor3 = on and Color3.fromRGB(0,255,100) or Color3.fromRGB(255,50,50)
    pcall(function() setfflag("NextGenReplicatorEnabledWrite4", on and "true" or "false") end)
end)

-- Player name input for fling
local nameBox = Instance.new("TextBox", content)
nameBox.Size = UDim2.new(1,-20,0,50)
nameBox.Position = UDim2.new(0,10,0,80)
nameBox.PlaceholderText = "Enter player name..."
nameBox.Text = ""
nameBox.BackgroundColor3 = Color3.fromRGB(40,40,80)
nameBox.TextColor3 = Color3.new(1,1,1)
nameBox.TextScaled = true
Instance.new("UICorner", nameBox).CornerRadius = UDim.new(0,14)

-- Fling Toggle
local flingBtn = newBtn("FLING OFF", 150, function()
    local on = flingBtn.Text == "FLING OFF"
    flingBtn.Text = on and "FLING ON" or "FLING OFF"
    flingBtn.BackgroundColor3 = on and Color3.fromRGB(0,255,120) or Color3.fromRGB(255,50,50)

    if on then
        local targetName = nameBox.Text
        local target = Players:FindFirstChild(targetName)
        if not target or not target.Character or not target.Character:FindFirstChild("HumanoidRootPart") then
            flingBtn.Text = "FLING OFF"
            flingBtn.BackgroundColor3 = Color3.fromRGB(255,50,50)
            return
        end

        local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local bv = Instance.new("BodyVelocity", hrp)
        bv.MaxForce = Vector3.new(1e9,1e9,1e9)

        spawn(function() -- Up/down velocity
            local dir = 1
            while flingBtn.Text == "FLING ON" do
                bv.Velocity = Vector3.new(0, dir * 928839293393, 0)
                dir = -dir
                task.wait(0.05)
            end
            bv:Destroy()
        end)

        spawn(function() -- Teleport inside target
            while flingBtn.Text == "FLING ON" do
                if target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                    hrp.CFrame = target.Character.HumanoidRootPart.CFrame
                end
                task.wait(0.01)
            end
        end)
    end
end)

-- PERFECT T-KEY OPEN/CLOSE (always centered)
local open = false
UserInputService.InputBegan:Connect(function(inp, gp)
    if gp then return end
    if inp.KeyCode == Enum.KeyCode.T then
        open = not open
        main.Visible = true

        if open then
            main.Position = UDim2.new(0.5, -170, 1.2, 0)
            TweenService:Create(main, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                Position = UDim2.new(0.5, -170, 0.5, -230)
            }):Play()
        else
            TweenService:Create(main, TweenInfo.new(0.4, Enum.EasingStyle.Quart), {
                Position = UDim2.new(0.5, -170, -1, 0)
            }):Play()
            task.wait(0.45)
            main.Visible = false
        end
    end
end)

-- Startup animation
main.Visible = true
main.Position = UDim2.new(0.5, -170, 1.2, 0)
TweenService:Create(main, TweenInfo.new(0.7, Enum.EasingStyle.Back), {
    Position = UDim2.new(0.5, -170, 0.5, -230)
}):Play()

print("Replicator + Fling Hub v6.0 loaded! Press T to open/close")
